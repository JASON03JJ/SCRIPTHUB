-- PVB SHOP BUYER by Jason

local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

-- Itemlisten
local Seeds = {
    "Cactus Seed","Strawberry Seed","Pumpkin Seed","Sunflower Seed","Dragon Fruit Seed",
    "Eggplant Seed","Watermelon Seed","Grape Seed","Cocotank Seed","Carnivorous Plant Seed",
    "Mr Carrot Seed","Tomatrio Seed","Shroombino Seed"
}

local Gears = {
    "Water Bucket","Frost Grenade","Banana Gun","Frost Blower","Carrot Launcher"
}

-- ScreenGui
local gui = Instance.new("ScreenGui")
gui.Name = "PVBShopBuyer"
gui.ResetOnSpawn = false
gui.IgnoreGuiInset = true
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = CoreGui

-- Main Frame
local main = Instance.new("Frame")
main.Size = UDim2.new(0, 500, 0, 300)
main.Position = UDim2.new(0.5, -250, 0.5, -150)
main.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
main.BorderSizePixel = 0
main.AnchorPoint = Vector2.new(0.5, 0.5)
main.Parent = gui
Instance.new("UICorner", main).CornerRadius = UDim.new(0, 12)

-- Topbar
local topbar = Instance.new("Frame")
topbar.Size = UDim2.new(1, 0, 0, 30)
topbar.BackgroundColor3 = Color3.fromRGB(40, 40, 70)
topbar.BorderSizePixel = 0
topbar.Parent = main
Instance.new("UICorner", topbar).CornerRadius = UDim.new(0, 12)

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -70, 1, 0)
title.BackgroundTransparency = 1
title.Text = "PVB SHOP BUYER"
title.Font = Enum.Font.GothamBold
title.TextSize = 16
title.TextColor3 = Color3.fromRGB(200, 220, 255)
title.TextXAlignment = Enum.TextXAlignment.Center
title.Parent = topbar

-- Close Button (X)
local closeBtn = Instance.new("TextButton")
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -35, 0, 0)
closeBtn.BackgroundColor3 = Color3.fromRGB(150, 40, 40)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 18
closeBtn.TextColor3 = Color3.fromRGB(255,255,255)
closeBtn.Parent = topbar
Instance.new("UICorner", closeBtn).CornerRadius = UDim.new(0, 8)

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

-- Sidebar Frame (für Tabs)
local sidebar = Instance.new("Frame")
sidebar.Size = UDim2.new(0, 120, 1, -30)
sidebar.Position = UDim2.new(0, 0, 0, 30)
sidebar.BackgroundColor3 = Color3.fromRGB(35,35,50)
sidebar.BorderSizePixel = 0
sidebar.Parent = main
Instance.new("UICorner", sidebar).CornerRadius = UDim.new(0, 8)

-- Sidebar Buttons
local function createSidebarButton(text, posY)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, -10, 0, 30)
    btn.Position = UDim2.new(0,5,0,posY)
    btn.Text = text
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.BackgroundColor3 = Color3.fromRGB(60,60,80)
    btn.Parent = sidebar
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)
    return btn
end

local seedTabBtn = createSidebarButton("Seeds",5)
local gearTabBtn = createSidebarButton("Gear",40)
local extraTabBtn = createSidebarButton("Extras",75)

-- Content Area
local content = Instance.new("Frame")
content.Size = UDim2.new(1, -130, 1, -30)
content.Position = UDim2.new(0,130,0,30)
content.BackgroundColor3 = Color3.fromRGB(30,30,45)
content.BorderSizePixel = 0
content.Parent = main
Instance.new("UICorner", content).CornerRadius = UDim.new(0,8)

-- ScrollFrame für Buttons
local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.new(1,0,1,0)
scroll.CanvasSize = UDim2.new(0,0,0,0)
scroll.ScrollBarThickness = 6
scroll.BackgroundTransparency = 1
scroll.Parent = content
scroll.AutomaticCanvasSize = Enum.AutomaticSize.Y

-- UIListLayout (untereinander)
local layout = Instance.new("UIListLayout")
layout.Parent = scroll
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0,5)

-- Funktion zum Erstellen von Buttons
local function createButtons(list, remoteName)
    scroll:ClearAllChildren()
    for i, itemName in ipairs(list) do
        local btn = Instance.new("TextButton")
        btn.Size = UDim2.new(1,-10,0,30)
        btn.Position = UDim2.new(0,5,0,(i-1)*35 + 5)
        btn.BackgroundColor3 = Color3.fromRGB(60,100,80)
        btn.Text = itemName
        btn.Font = Enum.Font.GothamBold
        btn.TextSize = 14
        btn.TextColor3 = Color3.fromRGB(255,255,255)
        btn.Parent = scroll
        Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)

        btn.MouseButton1Click:Connect(function()
            if remoteName then
                local args = {itemName}
                game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild(remoteName):FireServer(unpack(args))
            end
        end)
    end
end

-- Extras Tab Button
extraTabBtn.MouseButton1Click:Connect(function()
    scroll:ClearAllChildren()
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1,-10,0,40)
    btn.Position = UDim2.new(0,5,0,5)
    btn.BackgroundColor3 = Color3.fromRGB(100,80,60)
    btn.Text = "Equip Best + Collect Monny"
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.TextColor3 = Color3.fromRGB(255,255,255)
    btn.Parent = scroll
    Instance.new("UICorner", btn).CornerRadius = UDim.new(0,6)

    btn.MouseButton1Click:Connect(function()
        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("EquipBestBrainrots"):FireServer()
    end)
end)

-- Tabs Switch
seedTabBtn.MouseButton1Click:Connect(function()
    createButtons(Seeds, "BuyItem")
end)

gearTabBtn.MouseButton1Click:Connect(function()
    createButtons(Gears, "BuyGear")
end)

-- Standardmäßig Seeds anzeigen
createButtons(Seeds, "BuyItem")

-- Dragging
local dragging, dragStart, startPos
topbar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		dragStart = input.Position
		startPos = main.Position
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
		local delta = input.Position - dragStart
		main.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
	end
end)
